name: Make Repository Public

on:
  schedule:
    # Run at 17:00 UTC on February 3, 2026 (9 AM PST)
    - cron: '0 17 3 2 *'
  workflow_dispatch: # Allow manual trigger for testing

permissions:
  contents: write

jobs:
  make-public:
    runs-on: ubuntu-latest
    steps:
      - name: Make repository public
        run: |
          echo "Making repository public at $(date)"
          curl -X PATCH \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
            -H "X-GitHub-Api-Version: 2022-11-28" \
            https://api.github.com/repos/${{ github.repository }} \
            -d '{"private":false}'
          
          if [ $? -eq 0 ]; then
            echo "Repository successfully made public!"
          else
            echo "Failed to make repository public"
            exit 1
          fi
